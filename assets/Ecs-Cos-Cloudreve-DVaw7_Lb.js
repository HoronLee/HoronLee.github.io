import{_ as d}from"./ValaxyMain.vue_vue_type_style_index_0_lang-BlZE3LhB.js";import{_ as c,a as k,p as u,o as p,c as E,w as l,f as s,g as e,h as n,r as t,i as g}from"./app-DYGYtZ5U.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-B9Dth9xg.js";import"./YunCard.vue_vue_type_script_setup_true_lang-ZIvkhB7t.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-nY4cFgbl.js";import"./index-C7yU5XnD.js";const r=JSON.parse('{"title":"Ecs+Cos+Cloudreve","description":null,"frontmatter":{"title":"Ecs+Cos+Cloudreve","businesscard":true,"date":"2023-04-03T18:33:39.000Z","updated":null,"tags":["CentOS","Linux","Cloudreve","COS"],"categories":["服务器运维","对象存储"],"keywords":null,"description":null,"top_img":null,"comments":null,"cover":"https://img.81857.net/2020/0707/20200707024741450.jpg","toc":null,"toc_number":null,"toc_style_simple":null,"copyright":null,"copyright_author":null,"copyright_author_href":null,"copyright_url":null,"copyright_info":null,"mathjax":null,"katex":null,"aplayer":null,"highlight_shrink":null,"aside":null,"swiper_index":null},"headers":[],"relativePath":"pages/posts/Ecs-Cos-Cloudreve.md","path":"/home/runner/work/horonlee.github.io/horonlee.github.io/pages/posts/Ecs-Cos-Cloudreve.md","lastUpdated":1711418005000}'),m={name:"pages/posts/Ecs-Cos-Cloudreve.md",data(){return{data:r,frontmatter:r.frontmatter,$frontmatter:r.frontmatter}},setup(){const i=k();i.meta.frontmatter=Object.assign(i.meta.frontmatter||{},r.frontmatter||{}),u("pageData",r)}},_={id:"下载安装cloudreve",tabindex:"-1"},y=s("blockquote",null,[s("p",null,"这里我选用的是阿里云的Ecs轻应用 并且不是使用Docker来部署（那也太傻瓜操作了吧😂")],-1),f=s("li",null,"登录到Shell终端",-1),v=s("li",null,"cd进上传软件包的目录",-1),b=s("li",null,[e("解压文件"),s("code",null,"tar -xvzf cloudreve_3.7.1_linux_amd64.tar.gz")],-1),C=s("li",null,[e("解压之后文件应该全部在当前目录，现在给予运行权限"),s("code",null,"chmod +x ./cloudreve")],-1),D=s("li",null,[e("现在理论上可以直接运行Cloudreve了"),s("code",null,"./cloudreve"),e("，运行成功之后会显示初始账号密码，访问网页的地址就是http://"),s("em",null,"$IP"),e(":5212（记得在服务器安全组开启5212的端口放行）。")],-1),A=s("p",null,[e("登录进去的主页大概是张这样的（我改了一些配色啥的）："),s("img",{src:"https://bu.dusays.com/2023/04/02/64293bd766c6d.png",alt:"Cloudreve"})],-1),x={id:"配置守护进程",tabindex:"-1"},$=s("blockquote",null,[s("p",null,"这里我们采用systemd方式（Systemctl） 还有一个叫做Supervisor的，我没用过所以不写（逊了")],-1),F=s("ol",null,[s("li",null,[e("编辑配置文件"),s("code",null,"vim /usr/lib/systemd/system/cloudreve.service"),e("，其中PATH_TO_CLOUDREVE替换成你cloudreve的安装目录")])],-1),P=s("div",{class:"language-vim"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vim"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[Unit]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Description"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cloudreve")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Documentation"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"https://docs.cloudreve.org")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"After"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"network.target")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"After"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"mysqld.service")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Wants"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"network.target")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[Service]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"WorkingDirectory"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"/PATH_TO_CLOUDREVE")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ExecStart"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#DBEDFF"}},"/PATH_TO_CLOUDREVE/"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cloudreve")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Re"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"start="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"on-abnormal")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"RestartSec"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"5s")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"KillMode"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"mixed")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"StandardOutput"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"null")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"StandardError"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"syslog")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[Install]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"WantedBy"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"multi-user.target")])])]),s("button",{class:"collapse"})],-1),S=s("ol",{start:"2"},[s("li",null,[e("更新配置"),s("code",null,"systemctl daemon-reload")]),s("li",null,[e("启动服务"),s("code",null,"systemctl start cloudreve")]),s("li",null,[e("设置自启动"),s("code",null,"systemctl enable cloudreve")]),s("li",null,[e("查看进程状态和部分log"),s("code",null,"systemctl status cloudreve")])],-1),O={id:"使用nginx配置反向代理",tabindex:"-1"},w=s("blockquote",null,[s("p",null,"我也想，但是考虑到国内服务器备案变严格了，非80、443端口也没办法用域名直接访问了，所以就作此就罢。")],-1),N={id:"连接到腾讯cos对象储存",tabindex:"-1"},R=s("img",{src:"https://bu.dusays.com/2023/04/02/64293bd76b19b.png",alt:"Cloudreve+cos"},null,-1),T={id:"使用宝塔面板nginx的重定向或者反向代理代理ip-端口的访问方式",tabindex:"-1"},V=s("blockquote",null,[s("p",null,"我推荐使用重定向，因为这样不用看代理服务器的带宽，也能低成本的让我们免去记忆Cloudreve所在服务器IP的麻烦")],-1),q=s("p",null,[e("注意：记得取消勾选"),s("strong",null,"保留URI参数"),e("，要不然后面会多一个“/”导致直接打开的网页404。")],-1),I=s("figure",null,[s("img",{src:"https://bu.dusays.com/2023/04/02/64293dd44fe6e.png",alt:"宝塔设置",loading:"lazy",decoding:"async"})],-1);function L(i,U,z,B,o,H){const a=g,h=d;return p(),E(h,{frontmatter:o.frontmatter,data:o.data},{"main-content-md":l(()=>[s("h1",_,[e("下载安装Cloudreve "),n(a,{class:"header-anchor",href:"#下载安装cloudreve","aria-label":'Permalink to "下载安装Cloudreve"'},{default:l(()=>[e("​")]),_:1})]),y,s("ol",null,[f,s("li",null,[e("部署"),n(a,{href:"https://cloudreve.org/",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("Cloudreve")]),_:1}),e("云盘软件")]),s("li",null,[e("下载Cloudreve-3.7.1软件包👉"),n(a,{href:"https://github.com/cloudreve/Cloudreve/releases/tag/3.7.1",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("GitHub-Release")]),_:1}),e("，记得选择Linux、amd64版的tar.gz包（cloudreve_3.7.1_linux_amd64.tar.gz），下载后上传到服务器的某个目录")]),v,b,C,D]),s("blockquote",null,[s("p",null,[e("但是为了以后方便开机自启和软件后台运行，我们需要为它配置"),n(a,{href:"https://blog.csdn.net/lianghe_work/article/details/47659889",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("守护进程")]),_:1})])]),A,s("h1",x,[e("配置守护进程 "),n(a,{class:"header-anchor",href:"#配置守护进程","aria-label":'Permalink to "配置守护进程"'},{default:l(()=>[e("​")]),_:1})]),$,F,P,S,s("h1",O,[e("使用Nginx配置反向代理 "),n(a,{class:"header-anchor",href:"#使用nginx配置反向代理","aria-label":'Permalink to "使用Nginx配置反向代理"'},{default:l(()=>[e("​")]),_:1})]),w,s("h1",N,[e("连接到腾讯Cos对象储存 "),n(a,{class:"header-anchor",href:"#连接到腾讯cos对象储存","aria-label":'Permalink to "连接到腾讯Cos对象储存"'},{default:l(()=>[e("​")]),_:1})]),s("p",null,[e("直接看"),n(a,{href:"https://cloud.tencent.com/developer/article/2041954",target:"_blank",rel:"noreferrer"},{default:l(()=>[e("这篇文章")]),_:1}),e("罢，一路没什么好说的。 配置完cos储存策略后，记得设置你所在的用户组的储存策略为cos的，然后上传一个文件试试，如果没问问题就会呈现以下效果： "),R]),s("h1",T,[e("使用宝塔面板Nginx的重定向或者反向代理代理IP+端口的访问方式 "),n(a,{class:"header-anchor",href:"#使用宝塔面板nginx的重定向或者反向代理代理ip-端口的访问方式","aria-label":'Permalink to "使用宝塔面板Nginx的重定向或者反向代理代理IP+端口的访问方式"'},{default:l(()=>[e("​")]),_:1})]),V,q,I]),"main-header":l(()=>[t(i.$slots,"main-header")]),"main-header-after":l(()=>[t(i.$slots,"main-header-after")]),"main-nav":l(()=>[t(i.$slots,"main-nav")]),"main-content":l(()=>[t(i.$slots,"main-content")]),"main-content-after":l(()=>[t(i.$slots,"main-content-after")]),"main-nav-before":l(()=>[t(i.$slots,"main-nav-before")]),"main-nav-after":l(()=>[t(i.$slots,"main-nav-after")]),comment:l(()=>[t(i.$slots,"comment")]),footer:l(()=>[t(i.$slots,"footer")]),aside:l(()=>[t(i.$slots,"aside")]),"aside-custom":l(()=>[t(i.$slots,"aside-custom")]),default:l(()=>[t(i.$slots,"default")]),_:3},8,["frontmatter","data"])}const Z=c(m,[["render",L]]);export{r as data,Z as default};
